<!DOCTYPE html>
<html class="header-tabs">
<head>
    <!--
    From: <Saved by Blink>
    Snapshot-Content-Location: https://tfragment.stel.com/
    Subject: Fragment
    Date: Tue, 17 Feb 2026 16:33:12 +0300
    MIME-Version: 1.0
    Content-Type: multipart/related; type="text/html"; boundary="----MultipartBoundary--lYt6MN8NaqKP5sKkrv7GkGadVC7P7Z8KIdatO9tWB8----"
    -->
    <meta charset="utf-8">
    <title>Fragment</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="MobileOptimized" content="176">
    <meta name="HandheldFriendly" content="True">
    <meta name="twitter:card" content="summary">
    <meta property="og:url" content="https://tfragment.stel.com/">
    <meta property="og:title" content="Buy and Sell Usernames">
    <meta property="og:image" content="https://tfragment.stel.com/img/fragment_image.png">
    <meta property="og:description" content="Secure your name with blockchain in an ecosystem of 1+ billion users and assign it as a link for your personal account, channel or group.">
    <meta property="og:site_name" content="Fragment Auctions">
    <link rel="canonical" href="https://tfragment.stel.com/">
    <meta property="og:type" content="photo">
    <link rel="shortcut icon" href="https://tfragment.stel.com/img/fragment.ico" type="image/x-icon">
    <link rel="mask-icon" href="https://tfragment.stel.com/img/fragment_icon.svg" color="#121519">
    <script>document.cookie="stel_dt="+encodeURIComponent((new Date).getTimezoneOffset())+";path=/;max-age=31536000;samesite=None;secure"</script>
    
    <link href="https://tfragment.stel.com/css/font-roboto.css" rel="stylesheet" type="text/css">
    <link href="https://tfragment.stel.com/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://tfragment.stel.com/css/bootstrap-extra.css" rel="stylesheet">
    <link href="https://tfragment.stel.com/css/auction.css" rel="stylesheet">

    <!-- Additional inline styles from the original MHTML (preserved) -->
    <style>
        @page Section_1 { size:612pt 792pt; margin:70.85pt }div.Section_1 { page:Section_1 }body { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }h1, h2, h3, h4, h5, h6, p { margin:0pt }table { margin-top:0pt; margin-bottom:0pt }h1 { margin-top:12pt; margin-bottom:0pt; page-break-inside:avoid; page-break-after:avoid; line-height:25.6pt; font-family:'Times New Roman'; font-size:23.5pt; font-weight:normal; font-style:normal; color:#2f5496 }h2 { margin-top:2pt; margin-bottom:0pt; page-break-inside:avoid; page-break-after:avoid; line-height:20.6pt; font-family:'Times New Roman'; font-size:19pt; font-weight:normal; font-style:normal; color:#2f5496 }h3 { margin-top:2pt; margin-bottom:0pt; page-break-inside:avoid; page-break-after:avoid; line-height:17.35pt; font-family:'Times New Roman'; font-size:16pt; font-weight:normal; font-style:normal; color:#1f3763 }h4 { margin-top:2pt; margin-bottom:0pt; page-break-inside:avoid; page-break-after:avoid; line-height:12.4pt; font-family:'Times New Roman'; font-size:11.5pt; font-weight:normal; font-style:normal; color:#2f5496 }h5 { margin-top:2pt; margin-bottom:0pt; page-break-inside:avoid; page-break-after:avoid; line-height:9.9pt; font-family:'Times New Roman'; font-size:9pt; font-weight:normal; font-style:normal; color:#2f5496 }h6 { margin-top:2pt; margin-bottom:0pt; page-break-inside:avoid; page-break-after:avoid; line-height:9.1pt; font-family:'Times New Roman'; font-size:8.5pt; font-weight:normal; font-style:normal; color:#1f3763 }.ajcontent { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.no-transitionany { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.popup-containerhide { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.popup-containerhidepopup { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.popuph4 { line-height:16.5pt; font-family:Arial; font-size:13.5pt; font-weight:bold; color:#333333 }.popuppopup-buttons { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.popuppopup-text { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-dropdowndropdown-menulidropdown-menu-item { line-height:15pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-dropdowndropdown-menuliselected { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-header-menu-bodynth-child1tm-menu-subheadernth-child1 { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-header-menuhide { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-header-menuhidetm-header-menu-close-button { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-header-menuhidetm-header-menu-window { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }.tm-section-headerbtn-group { line-height:12.85pt; font-family:Arial; font-size:9pt; color:#333333 }span.Heading1Char { font-family:'Calibri Light'; font-size:16pt; color:#2f5496 }span.Heading2Char { font-family:'Calibri Light'; font-size:13pt; color:#2f5496 }span.Heading3Char { font-family:'Calibri Light'; font-size:12pt; color:#1f3763 }span.Heading4Char { font-family:'Calibri Light'; font-style:italic; color:#2f5496 }span.Heading5Char { font-family:'Calibri Light'; color:#2f5496 }span.Heading6Char { font-family:'Calibri Light'; color:#1f3763 }span.btn { font-size:10pt; font-weight:bold }span.iicon { font-style:normal }span.popuppopup-buttonsbtn { font-size:10.5pt; font-weight:bold }
    </style>
</head>
<body class="emoji_image no-transition">
    <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;left:-10000px">
        <defs>
            <path id="icon-premium" d="m8.88 13.45 2.89-5.71c.33-.66 1.14-.93 1.8-.6.25.13.46.35.59.61l2.73 5.51c.22.45.66.76 1.16.82l5.7.68c.78.09 1.33.79 1.24 1.57-.04.31-.18.61-.41.84l-4.52 4.42c-.18.18-.27.43-.23.68l.75 5.98c.1.85-.5 1.63-1.36 1.74-.32.04-.65-.02-.94-.18l-4.77-2.59c-.34-.19-.76-.19-1.11-.01l-4.93 2.52c-.7.35-1.55.07-1.91-.62-.13-.26-.18-.55-.14-.84l.4-2.74c.19-1.34 1.03-2.51 2.23-3.12l5.49-2.78c.15-.08.2-.26.13-.4-.06-.12-.18-.18-.31-.16l-6.71.95c-1.02.15-2.06-.14-2.87-.79l-2.23-1.82c-.64-.51-.73-1.45-.22-2.09.24-.29.59-.48.97-.53l5.73-.74c.36-.04.68-.27.85-.6z"></path>
            <path id="icon-ton-qr" d="m4.02 7h15.945c.33 0 .6.27.6.615 0 .105-.015.21-.075.3l-7.56 13.62c-.33.6-1.08.81-1.665.48-.21-.12-.375-.285-.48-.495l-7.305-13.62c-.15-.3-.045-.675.255-.825.09-.045.18-.075.285-.075zm7.98 14.67v-14.67z" fill="none" stroke="currentColor" stroke-width="2.1"></path>
            <path d="M 6.67 5.74 L 8.88 1.32 C 9.13 0.81 9.74 0.6 10.25 0.86 C 10.45 0.96 10.61 1.13 10.71 1.33 L 12.79 5.59 C 12.96 5.93 13.29 6.17 13.67 6.22 L 18.03 6.74 C 18.62 6.82 19.05 7.36 18.98 7.96 C 18.95 8.2 18.84 8.43 18.66 8.61 L 15.21 12.03 C 15.07 12.16 15.01 12.36 15.03 12.56 L 15.6 17.17 C 15.69 17.83 15.22 18.44 14.57 18.52 C 14.32 18.55 14.07 18.5 13.85 18.38 L 10.21 16.38 C 9.95 16.24 9.63 16.23 9.36 16.37 L 5.59 18.32 C 5.06 18.59 4.41 18.38 4.14 17.84 C 4.03 17.64 4 17.41 4.03 17.19 L 4.33 15.07 C 4.48 14.03 5.12 13.14 6.04 12.66 L 10.23 10.51 C 10.34 10.45 10.38 10.31 10.33 10.2 C 10.28 10.11 10.19 10.06 10.09 10.08 L 4.97 10.82 C 4.19 10.93 3.39 10.71 2.78 10.2 L 1.07 8.8 C 0.58 8.4 0.51 7.68 0.9 7.18 C 1.09 6.96 1.35 6.81 1.64 6.77 L 6.02 6.2 C 6.3 6.17 6.54 5.99 6.67 5.74 Z" id="icon-star"></path>
            <linearGradient x1="25%" y1="0.825%" x2="74.92%" y2="107.86%" id="s2"><stop stop-color="#FFD951" offset="0%"></stop><stop stop-color="#FFB222" offset="100%"></stop></linearGradient>
            <linearGradient x1="50%" y1="0%" x2="50%" y2="99.8%" id="s3"><stop stop-color="#E58F0D" offset="0%"></stop><stop stop-color="#EB7915" offset="100%"></stop></linearGradient>
            <filter x="-5.2%" y="-5.3%" width="110.3%" height="110.6%" filterUnits="objectBoundingBox" id="s4"><feOffset dx="1" dy="1" in="SourceAlpha" result="shadowOffsetInner1"></feOffset><feComposite in="shadowOffsetInner1" in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowInnerInner1"></feComposite><feColorMatrix values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.657 0" type="matrix" in="shadowInnerInner1"></feColorMatrix></filter>
            <g id="icon-colorful-star" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><use fill="url(#s2)" fill-rule="evenodd" xlink:href="#icon-star"></use><use fill="#000" filter="url(#s4)" xlink:href="#icon-star"></use><use stroke="url(#s3)" stroke-width="0.89" xlink:href="#icon-star"></use></g>
            <g id="icon-multi-star" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><use stroke="currentColor" stroke-width="2.67" xlink:href="#icon-star"></use><use fill="url(#s2)" fill-rule="evenodd" xlink:href="#icon-star"></use><use fill="#000" filter="url(#s4)" xlink:href="#icon-star"></use><use stroke="url(#s3)" stroke-width="0.89" xlink:href="#icon-star"></use><path d="M 5.2 19 L 14 19 L 9.8 16.7 L 5.2 19 Z" fill="currentColor"></path></g>
            <filter id="svg-filter--filters-icon-color"><feFlood flood-color="var(--filters-icon-color)"></feFlood><feComposite in2="SourceGraphic" operator="in"></feComposite></filter>
        </defs>
    </svg>
    <div id="aj_progress" class="progress-bar"></div>
    
    <div id="aj_content">
        <header class="tm-header with-tabs">
            <div class="tm-header-logo">
                <a href="/" class="tm-logo js-header-logo js-logo js-random-logo js-logo-hoverable">
                    <i class="tm-logo-icon js-logo-icon"></i>
                    <i class="tm-logo-text"></i>
                </a>
            </div>
            <div class="tm-header-body">
                <div class="tm-header-tabs-wrap">
                    <div class="tm-header-tabs tm-x-scrollable js-x-scrollable">
                        <a href="/" class="tm-header-tab tab-active">Usernames</a>
                        <a href="https://tfragment.stel.com/numbers" class="tm-header-tab">Numbers</a>
                        <a href="https://tfragment.stel.com/gifts" class="tm-header-tab">Gifts<span class="tm-label-new tm-header-tab-label-new">New</span></a>
                        <a href="https://tfragment.stel.com/stars" class="tm-header-tab">Stars</a>
                        <a href="https://tfragment.stel.com/premium" class="tm-header-tab">Premium</a>
                        <a href="https://tfragment.stel.com/ads" class="tm-header-tab">Ads</a>
                    </div>
                </div>
            </div>
            <div class="tm-header-actions tm-header-actions-wide">
                <button class="btn btn-default tm-header-action tm-header-button login-link">
                    <i class="icon icon-connect-telegram"></i>
                    <span class="tm-button-label">Connect Telegram</span>
                </button>
                <button class="btn btn-primary tm-header-action tm-header-button ton-auth-link">
                    <i class="icon icon-connect-ton"></i>
                    <span class="tm-button-label">Connect TON</span>
                </button>
            </div>
            <div class="tm-header-actions tm-header-actions-thin">
                <button class="btn btn-primary tm-header-action tm-header-button ton-auth-link">
                    <i class="icon icon-connect-ton"></i>
                    <span class="tm-button-label">Connect TON</span>
                </button>
            </div>
            <div class="tm-header-menu-button js-header-menu-button icon-before icon-header-menu"></div>
            <div class="tm-header-menu hide js-header-menu" data-close-outside="js-header-menu-window">
                <div class="tm-header-menu-close-button js-header-menu-close-button icon-before icon-header-menu-close"></div>
                <div class="tm-header-menu-window js-header-menu-window">
                    <div class="tm-header-menu-body">
                        <h4 class="tm-menu-subheader">Platform</h4>
                        <div class="tm-menu-links">
                            <a href="https://tfragment.stel.com/about" class="tm-menu-link icon-before icon-menu-about">About</a>
                            <a href="https://tfragment.stel.com/terms" class="tm-menu-link icon-before icon-menu-terms">Terms</a>
                            <a href="https://tfragment.stel.com/privacy" class="tm-menu-link icon-before icon-menu-privacy">Privacy Policy</a>
                        </div>
                        <div class="tm-header-menu-footer">
                            <div class="tm-header-menu-footer-text">Connect TON and Telegram <br>to view your bids and assets</div>
                            <button class="btn btn-primary btn-block tm-menu-button ton-auth-link">
                                <i class="icon icon-connect-ton"></i><span class="tm-button-label">Connect TON</span>
                            </button>
                            <button class="btn btn-default btn-block tm-menu-button login-link">
                                <i class="icon icon-connect-telegram"></i><span class="tm-button-label">Connect Telegram</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <main class="tm-main">
            <section class="tm-main-intro">
                <h1 class="tm-main-intro-header">Buy and Sell Usernames</h1>
                <p class="tm-main-intro-text">
                    <b>Secure your name</b> with blockchain in an ecosystem of <b>1+billion</b> users and assign it as a link for your personal account, channel or group. <a href="https://tfragment.stel.com/about" class="icon-after icon-link-more">Learn more</a>
                </p>
            </section>
            <form action="/" class="tm-section tm-main-search-form js-main-search-form">
                <input type="hidden" name="type" value="usernames">
                <input type="hidden" name="sort" value="">
                <input type="hidden" name="filter" value="">
                <div class="icon-before icon-search tm-field tm-search-field js-main-search-field">
                    <input type="search" class="form-control tm-input tm-search-input" name="query" value="" placeholder="Enter a Telegram username..." autocomplete="off" spellcheck="false">
                    <span class="tm-search-loading"><svg class="circle-progress-wrap" viewport="0 0 22 22" width="22px" height="22px"><circle class="circle-progress" cx="50%" cy="50%" stroke-dashoffset="62"></circle></svg></span>
                    <span class="icon-before icon-search-clear tm-search-clear js-form-clear"></span>
                </div>
            </form>
            <section class="tm-section clearfix js-search-results">
                <div class="tm-section-header">
                    <h2 class="tm-section-header-text"><span class="thin-only">Auctions</span><span class="wide-only">Top Auctions</span></h2>
                    <div class="btn-group tm-dropdown">
                        <button class="btn btn-default dropdown-toggle icon-after" data-toggle="dropdown">
                            <span class="thin-only">Auction</span><span class="wide-only">On auction</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li class="selected"><a href="https://tfragment.stel.com/?sort=price&filter=auction" class="dropdown-menu-item js-main-search-dd-item" data-field="filter" data-value="auction">On auction</a></li>
                            <li><a href="https://tfragment.stel.com/?sort=price&filter=sold" class="dropdown-menu-item js-main-search-dd-item" data-field="filter" data-value="sold">Sold</a></li>
                            <li><a href="https://tfragment.stel.com/?sort=price&filter=sale" class="dropdown-menu-item js-main-search-dd-item" data-field="filter" data-value="sale">For sale</a></li>
                        </ul>
                    </div>
                    <div class="btn-group tm-dropdown">
                        <button class="btn btn-default dropdown-toggle icon-after" data-toggle="dropdown">
                            <span class="thin-only icon-before icon-sort-desc">Price</span><span class="wide-only">Price high to low</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li class="selected"><a href="https://tfragment.stel.com/?sort=price_desc" class="dropdown-menu-item js-main-search-dd-item" data-field="sort" data-value="price_desc">Price high to low</a></li>
                            <li><a href="https://tfragment.stel.com/?sort=price_asc" class="dropdown-menu-item js-main-search-dd-item" data-field="sort" data-value="price_asc">Price low to high</a></li>
                            <li><a href="https://tfragment.stel.com/?sort=listed" class="dropdown-menu-item js-main-search-dd-item" data-field="sort" data-value="listed">Recently listed</a></li>
                            <li><a href="https://tfragment.stel.com/?sort=ending" class="dropdown-menu-item js-main-search-dd-item" data-field="sort" data-value="ending">Ending soon</a></li>
                        </ul>
                    </div>
                </div>
                <div class="tm-table-wrap js-autoscrollable">
                    <table class="table tm-table tm-table-fixed">
                        <thead>
                            <tr>
                                <th style="--wide-width:33%;--thin-width:55%">Username</th>
                                <th style="--wide-width:23%;--thin-width:45%" class="thin-last-col">Minimum bid</th>
                                <th style="--wide-width:44%" class="wide-last-col wide-only">Auction ends in</th>
                            </tr>
                        </thead>
                        <tbody class="tm-high-cells js-autoscroll-body">
                            <!-- dynamic rows will be injected here by offline script -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
        <div class="popup-container hide js-unavailable-popup" data-close-outside="popup-body">
            <div class="popup"><div class="popup-body"><section>
                <h4 class="hide js-unavailable-text">Address unavailable</h4>
                <h4 class="hide js-available-later-text">Coming soon</h4>
                <p class="popup-text hide js-unavailable-text">The Telegram username <span class="accent-color js-username"></span> is currently not for sale.</p>
                <p class="popup-text hide js-available-later-text">The username <span class="accent-color js-username"></span> will be put up for auction later this year. Only usernames that start with letters A-Q have been currently made available by Telegram.</p>
                <div class="popup-buttons"><a class="btn btn-link btn-lg popup-cancel-btn">OK</a></div>
            </section></div></div>
        </div>
        <div class="popup-container hide js-botsabout-popup" data-close-outside="popup-body">
            <div class="popup"><div class="popup-body"><section>
                <h4>Bot usernames</h4>
                <p class="popup-text">This username has been upgraded and it can now be assigned not just to channels, groups or users, but also to bots. This upgrade is permanent and can be performed for any collectible username by paying a fee of <span class="icon-before icon-ton tm-amount">1,000</span>. Usernames will remain upgraded even if they change owners.</p>
                <div class="popup-buttons"><a class="btn btn-link btn-lg popup-cancel-btn">OK, got it</a></div>
            </section></div></div>
        </div>
        <footer class="tm-footer">
            <div class="tm-footer-links">
                <a href="/" class="tm-footer-link">Top Auctions</a>
                <a href="https://tfragment.stel.com/about" class="tm-footer-link">About</a>
                <a href="https://tfragment.stel.com/terms" class="tm-footer-link">Terms</a>
                <a href="https://tfragment.stel.com/privacy" class="tm-footer-link">Privacy</a>
            </div>
        </footer>
    </div>
    
    <!-- External scripts (loaded from CDN, will work if online) -->
    <script src="https://tfragment.stel.com/js/jquery.min.js"></script>
    <script src="https://tfragment.stel.com/js/bootstrap.min.js"></script>
    <script src="https://tfragment.stel.com/js/main-aj.js"></script>
    <script src="https://tfragment.stel.com/js/jquery-ex.js"></script>
    <script src="https://tfragment.stel.com/js/jquery-ui.min.js"></script>
    <script src="https://tfragment.stel.com/js/qr-code-styling.js"></script>
    <script src="https://tfragment.stel.com/js/tonconnect-ui.min.js"></script>
    <script src="https://tfragment.stel.com/js/auction.js"></script>
    <script src="https://tfragment.stel.com/js/tgsticker.js"></script>
    <script src="https://a-toauth.stel.com/js/telegram-widget.js"></script>
    
    <script>
        // Original initialization (preserved)
        ajInit({"version":610,"apiUrl":"\/api?hash=b9551231090a177a95","unauth":true,"state":{"quickSearch":false,"tonRate":1.46735055}});
        // ... (the rest of original script block)
    </script>
    <script id="aj_script">
        Aj._useScrollHack=true;
        Main.init();
        Aj.onLoad(function(state) {
            state.unAuth = true;
            Login.init({"bot_id":5002962547,"request_access":"write"});
            state.onAuthClick = function(e) {
                var return_to = this.href || false;
                e.stopImmediatePropagation();
                e.preventDefault();
                Login.open(return_to);
            };
            $('.login-link').on('click', state.onAuthClick);
            $(document).on('click', '.login-link', state.onAuthClick);
        });
        Aj.onUnload(function(state) {
            $('.login-link').off('click', state.onAuthClick);
            $(document).off('click', '.login-link');
        });
        Wallet.init({"address":false,"ton_proof":"9e5c71e25ba676a25a","logged_in":false,"version":2});
    </script>
    <script>Aj.pageLoaded();</script>

    <!-- ================== OFFLINE IFRAME & SPOOFING SCRIPT ================== -->
    <iframe id="offline-backend" style="display:none;" srcdoc='
        <html><body><script>
            // Mock backend inside iframe â€“ listens for postMessage and responds
            const mockData = {
                auctions: [
                    { username: "alex", minBid: "100 TON", endsIn: "2 days" },
                    { username: "julia", minBid: "250 TON", endsIn: "5 hours" },
                    { username: "crypto", minBid: "1,200 TON", endsIn: "1 hour" },
                    { username: "nft", minBid: "75 TON", endsIn: "3 days" },
                    { username: "telegram", minBid: "10,000 TON", endsIn: "30 minutes" }
                ],
                users: {}
            };

            window.addEventListener("message", function(event) {
                if (event.source !== window.parent) return;
                const data = event.data;
                console.log("iframe received:", data);

                if (data.type === "login" && data.service === "telegram") {
                    event.source.postMessage({ type: "loginResponse", service: "telegram", success: true, user: { id: 12345, name: "Offline User" } }, "*");
                }
                else if (data.type === "login" && data.service === "ton") {
                    event.source.postMessage({ type: "loginResponse", service: "ton", success: true, address: "EQD...offline" }, "*");
                }
                else if (data.type === "getAuctions") {
                    // optionally apply filters/sort from data
                    let filtered = mockData.auctions;
                    if (data.query) {
                        filtered = filtered.filter(a => a.username.toLowerCase().includes(data.query.toLowerCase()));
                    }
                    event.source.postMessage({ type: "auctionsResponse", auctions: filtered }, "*");
                }
                else if (data.type === "placeBid") {
                    event.source.postMessage({ type: "bidResponse", success: true, message: "Bid placed (offline mock)" }, "*");
                }
            });
        <\/script></body></html>
    '></iframe>

    <script>
        (function() {
            // ---------- SPOOF URL ----------
            history.replaceState({}, '', 'https://tfragment.stel.com/');

            // ---------- POST MESSAGE HELPER ----------
            const backendFrame = document.getElementById('offline-backend');
            function sendToBackend(msg) {
                return new Promise(resolve => {
                    const handler = (e) => {
                        if (e.source !== backendFrame.contentWindow) return;
                        window.removeEventListener('message', handler);
                        resolve(e.data);
                    };
                    window.addEventListener('message', handler);
                    backendFrame.contentWindow.postMessage(msg, '*');
                });
            }

            // ---------- OVERRIDE AUTH CLICKS ----------
            // Disable original Login.open and replace with our mock
            if (typeof Login !== 'undefined') {
                Login.open = async function(return_to) {
                    const service = return_to?.includes('telegram') ? 'telegram' : 'ton'; // crude detection
                    const resp = await sendToBackend({ type: 'login', service });
                    if (resp.success) {
                        // Update UI to reflect logged-in state
                        document.querySelectorAll('.login-link, .ton-auth-link').forEach(btn => {
                            btn.classList.add('disabled');
                            btn.querySelector('.tm-button-label').innerText = 'Connected';
                        });
                        // Also hide the footer prompt
                        const footerText = document.querySelector('.tm-header-menu-footer-text');
                        if (footerText) footerText.style.display = 'none';
                        alert(`Mock ${service} login successful!`);
                    }
                };
            }

            // Also catch direct clicks (redundant but safe)
            document.addEventListener('click', async (e) => {
                const loginBtn = e.target.closest('.login-link');
                const tonBtn = e.target.closest('.ton-auth-link');
                if (loginBtn || tonBtn) {
                    e.preventDefault();
                    e.stopPropagation();
                    const service = loginBtn ? 'telegram' : 'ton';
                    const resp = await sendToBackend({ type: 'login', service });
                    if (resp.success) {
                        document.querySelectorAll('.login-link, .ton-auth-link').forEach(btn => {
                            btn.classList.add('disabled');
                            btn.querySelector('.tm-button-label').innerText = 'Connected';
                        });
                        const footerText = document.querySelector('.tm-header-menu-footer-text');
                        if (footerText) footerText.style.display = 'none';
                        alert(`Mock ${service} login successful!`);
                    }
                }
            }, true); // capture phase to run before original handlers

            // ---------- LOAD AUCTIONS INTO TABLE ----------
            async function loadAuctions(query = '', filter = 'auction', sort = 'price_desc') {
                const auctions = await sendToBackend({ type: 'getAuctions', query, filter, sort });
                const tbody = document.querySelector('.js-autoscroll-body');
                if (!tbody) return;
                tbody.innerHTML = ''; // clear
                auctions.auctions.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'tm-row-selectable';
                    row.innerHTML = `
                        <td>${item.username}</td>
                        <td class="thin-last-col">${item.minBid}</td>
                        <td class="wide-last-col wide-only">${item.endsIn}</td>
                    `;
                    tbody.appendChild(row);
                });
            }

            // Initial load
            loadAuctions();

            // ---------- SEARCH FORM HANDLER ----------
            const searchForm = document.querySelector('.js-main-search-form');
            if (searchForm) {
                searchForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const query = searchForm.querySelector('input[name="query"]').value;
                    // You could also read filter/sort from hidden fields
                    await loadAuctions(query);
                });
            }

            // ---------- FILTER / SORT DROPDOWNS ----------
            // Intercept dropdown item clicks to update table via postMessage instead of navigation
            document.querySelectorAll('.js-main-search-dd-item').forEach(item => {
                item.addEventListener('click', async (e) => {
                    e.preventDefault();
                    const field = item.dataset.field;   // 'filter' or 'sort'
                    const value = item.dataset.value;
                    // Update hidden inputs in form
                    const form = document.querySelector('.js-main-search-form');
                    if (form) {
                        const hidden = form.querySelector(`input[name="${field}"]`);
                        if (hidden) hidden.value = value;
                    }
                    // Reload auctions with new filter/sort
                    const query = form?.querySelector('input[name="query"]')?.value || '';
                    await loadAuctions(query);
                });
            });

            // ---------- MOCK BIDDING (if any bid button appears, but not present on main page) ----------
            // Could be extended, but main page has no direct bid buttons.
        })();
    </script>
    <!-- Cloudflare analytics (original) -->
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" data-cf-beacon='{"version":"2024.11.0","token":"71dbffdb78ff4319bd5af5986731abed","serverTiming":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true}}}' crossorigin="anonymous"></script>
</body>
</html>