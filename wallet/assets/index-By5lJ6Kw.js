import{a9 as de,b as _,u as A,aa as pe,al as me,r as j,j as e,dP as T,dQ as w,s as h,R as b,eV as ue,eW as xe,cC as I,cD as he,W as L,eX as ge,d3 as je,dV as fe,cA as R,dg as k,H as D,e as $,at as a,eY as _e,eZ as ye,e_ as z,cB as O,a6 as ve,ee as Se,ed as be,aS as Ie,G as V,e$ as H,f0 as J,a as B,i as G,dY as q,f1 as Y,e3 as Q,e5 as F,f2 as c,f3 as Ae,bg as g,e2 as we,cp as X,db as Z,aI as ke,f4 as De,L as Ce,B as K,em as Te,aq as We,f5 as Le,f6 as Re,f as Be,e6 as Fe,c1 as Pe,c7 as Ee,dG as Ne,dI as Me,dJ as d,ef as Ue,eg as $e,ei as ze,ej as Oe,e0 as Ve,eh as He,f7 as Je}from"./index-pFCF53l2.js";import{k as Ge,D as qe,C as Ye,P as E,S,i as Qe,h as Xe,j as Ze,W as ee,l as te,R as C,m as ne,n as se,o as oe,p as ae,q as ie,s as ce,t as re,u as Ke,v as et,w as tt,x as N,y as nt,z as st,E as ot,g as at,L as it,c as ct,d as rt,F as lt,N as dt,J as pt,f as mt,B as ut,T as xt}from"./TwoFA-YquvrfrT.js";import{E as ht,f as gt}from"./ErrorBoundary-DlkjD_lW.js";import"./TransitionGroup-Ba4hsFgp.js";import"./useTonRecipient-ChdT5Nv9.js";import"./index-B0JA3rv4.js";const jt=h.div`
    display: flex;
    gap: 0.5rem;
    align-items: center;

    width: 100%;
`,M=h.span`
    display: flex;
    color: ${t=>t.theme.iconSecondary};
`,ft=h.div`
    height: 28px;
    width: 28px;
`,W=({account:t,dragHandleProps:n})=>{const s=b(),{t:i}=_(),[r,o]=j.useState(!1),[u,x]=j.useState(!1),p=ue(t);return t.type==="ton-multisig"?null:t?e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs(jt,{children:[n?e.jsx(M,{...n,children:e.jsx(he,{})}):e.jsx(ft,{}),e.jsx(L,{emoji:t.emoji}),e.jsx(ge,{noWrap:!0,text:t.name,secondary:p}),e.jsx(je,{payload:y=>e.jsxs(R,{margin:!1,dropDown:!0,children:[e.jsx(k,{dropDown:!0,onClick:()=>{o(!0),y()},children:e.jsx(I,{children:e.jsx(D,{children:i("Rename")})})}),t.type==="mnemonic"&&e.jsx(k,{dropDown:!0,onClick:()=>{s($.settings+a.recovery+`/${t.id}`)},children:e.jsx(I,{children:e.jsx(D,{children:i("settings_backup_seed")})})}),e.jsx(_e,{}),e.jsx(k,{dropDown:!0,onClick:()=>{x(!0),y()},children:e.jsx(I,{children:e.jsx(D,{children:i("settings_delete_account")})})})]}),children:e.jsx(M,{children:e.jsx(fe,{})})})]})}),e.jsx(ye,{account:r?t:void 0,handleClose:()=>o(!1)}),e.jsx(z,{account:u?t:void 0,handleClose:()=>x(!1)})]}):e.jsx(xe,{})},U=h(O)`
    & > div {
        border-top: 1px solid ${t=>t.theme.separatorCommon};
        padding-top: 15px;
    }
`,_t=h(O)`
    & > div {
        border-top: none !important;
        padding-top: 15px;
    }
`,yt=h(R)`
    & > *:first-child > div {
        border-top: none !important;

        > div {
            border-top: none !important;
        }
    }
`,vt=()=>{const{onOpen:t}=de(),{t:n}=_(),s=A(),i=pe(),{handleDrop:r,itemsOptimistic:o}=me(i),u=j.useMemo(()=>[{name:n("balances_setup_wallet"),icon:e.jsx(Ge,{}),action:()=>t()}],[]);return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:n("Manage_wallets")}),e.jsxs(w,{children:[e.jsx(qe,{onDragEnd:r,onDragStart:()=>s.hapticNotification("impact_medium"),children:e.jsx(Ye,{droppableId:"wallets",children:x=>e.jsxs(yt,{...x.droppableProps,ref:x.innerRef,children:[o.map((p,y)=>p.type==="folder"?e.jsx(E,{draggableId:p.id,index:y,children:f=>e.jsx("div",{ref:f.innerRef,...f.draggableProps,children:p.accounts.map((v,l)=>l===0?e.jsx(U,{ios:!0,hover:!1,children:e.jsx(W,{account:v,dragHandleProps:f.dragHandleProps},v.id)},p.id):e.jsx(_t,{ios:!0,hover:!1,children:e.jsx(W,{account:v},v.id)},p.id))})},p.id):e.jsx(E,{draggableId:p.id,index:y,children:f=>e.jsx(U,{ios:!0,hover:!1,ref:f.innerRef,...f.draggableProps,children:e.jsx(W,{dragHandleProps:f.dragHandleProps,account:p})})},p.id)),x.placeholder]})})}),e.jsx(S,{items:u})]})]})},St=h(w)`
    display: flex;
    flex-direction: column;
`,bt=h(Ie)`
    height: 56px;
    border-radius: ${t=>t.theme.cornerSmall};
    margin-bottom: 1rem;
`,It=()=>{const{t}=_(),{isOpen:n,onClose:s,onOpen:i}=ve(),{mutate:r}=Se(),{data:o}=be(),u=!!(o!=null&&o.length)&&o.length>1,x=p=>{p&&r("all"),s()};return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:t("connected_apps_short")}),e.jsxs(St,{children:[u&&e.jsx(bt,{secondary:!0,onClick:i,children:t("disconnect_all_apps")}),e.jsx(Qe,{}),e.jsx(Xe,{isOpen:n,onClose:x,app:"all"})]})]})},At=()=>{const{t}=_();return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:t("settings_collectibles_list")}),e.jsx(w,{children:e.jsx(Ze,{})})]})},wt=()=>{const{t}=_(),n=b(),s=G(),{data:i}=H(),{data:r}=J(),{proFeatures:o}=B(),{onOpen:u}=q(),x=Y(),p=Q(),y=F(),f=j.useMemo(()=>{const l=[{name:t("Manage_wallets"),icon:e.jsx(ee,{}),action:()=>n(c(a.account))}];return o&&l.push({name:t("tonkeeper_pro"),icon:e.jsx(te,{}),action:()=>n(c(a.pro))}),l},[t]),v=j.useMemo(()=>{const l=[];return(s.type==="mnemonic"||s.type==="mam")&&l.push({name:t("settings_recovery_phrase"),icon:e.jsx(C,{}),action:()=>n(c(a.recovery))}),s.type==="mam"&&(l.push({name:t("settings_backup_wallet"),icon:e.jsx(C,{}),action:()=>n(c(a.recovery+"/"+s.id+"?wallet="+s.activeTonWallet.id))}),l.push({name:t("customize"),icon:e.jsx(L,{containerSize:"28px",emojiSize:"28px",emoji:s.emoji}),action:()=>u({accountId:s.id,derivationIndex:s.activeDerivation.index})}),l.push({name:t("settings_mam_indexes"),icon:`#${s.derivations.length.toString()}`,action:()=>n(c(g.derivations))})),p&&(s.type==="mnemonic"||s.type==="mam")&&l.push({name:t("two_fa_long"),icon:e.jsx(ne,{}),action:()=>n(c(a.twoFa))}),(s.type==="mnemonic"||s.type==="testnet"||s.type==="ton-only")&&l.push({name:t("settings_wallet_version"),icon:X(s.activeTonWallet.version),action:()=>n(c(a.version))}),s.type==="ledger"&&s.allAvailableDerivations.length>1&&l.push({name:t("settings_ledger_indexes"),icon:`# ${s.activeDerivationIndex+1}`,action:()=>n(c(a.ledgerIndexes))}),i!=null&&i.balances.length&&l.push({name:t("settings_jettons_list"),icon:e.jsx(se,{}),action:()=>n(c(a.jettons))}),r!=null&&r.length&&l.push({name:t("settings_collectibles_list"),icon:e.jsx(oe,{}),action:()=>n(c(a.nft))}),l.push({name:t("settings_security"),icon:e.jsx(ae,{}),action:()=>n(c(a.security))}),Z(s)&&l.push({name:t("settings_connected_apps"),icon:e.jsx(ie,{}),action:()=>n(c(g.connectedApps))}),(s.type==="mnemonic"||s.type==="mam")&&!x.disableWhole&&l.push({name:t("battery_title"),icon:e.jsx(ce,{}),action:()=>n(c(g.battery))}),y&&l.push({name:t("chains_title"),icon:e.jsx(re,{}),action:()=>n(c(g.chains))}),l},[t,n,s,i,r,p,x,y]);return e.jsxs(e.Fragment,{children:[e.jsx(S,{items:f}),e.jsx(S,{items:v})]})},kt=()=>{const{t}=_(),n=b(),{data:s}=H(),{data:i}=J(),{proFeatures:r}=B(),o=G(),{onOpen:u}=q(),x=Y(),p=Q(),[y,f]=j.useState(!1),v=o.activeTonWallet,l=F(),P=j.useMemo(()=>{const m=[{name:t("Manage_wallets"),icon:e.jsx(ee,{}),action:()=>n(c(a.account))}];return r&&m.push({name:t("tonkeeper_pro"),icon:e.jsx(te,{}),action:()=>n(c(a.pro))}),m},[v,t]),le=j.useMemo(()=>{const m=[];return Ae(o)&&m.push({name:t("settings_recovery_phrase"),icon:e.jsx(C,{}),action:()=>n(c(a.recovery))}),o.type==="mam"&&(m.push({name:t("settings_backup_wallet"),icon:e.jsx(C,{}),action:()=>n(c(a.recovery+"/"+o.id+"?wallet="+o.activeTonWallet.id))}),m.push({name:t("customize"),icon:e.jsx(L,{containerSize:"28px",emojiSize:"28px",emoji:o.activeDerivation.emoji}),action:()=>u({accountId:o.id,derivationIndex:o.activeDerivation.index})}),m.push({name:t("settings_mam_indexes"),icon:`#${o.derivations.length.toString()}`,action:()=>n(c(g.derivations))})),p&&(o.type==="mnemonic"||o.type==="mam")&&m.push({name:t("two_fa_long"),icon:e.jsx(ne,{}),action:()=>n(c(a.twoFa))}),we(o)&&m.push({name:t("settings_wallet_version"),icon:X(o.activeTonWallet.version),action:()=>n(c(a.version))}),o.type==="ledger"&&o.allAvailableDerivations.length>1&&m.push({name:t("settings_ledger_indexes"),icon:`# ${o.activeDerivationIndex+1}`,action:()=>n(c(a.ledgerIndexes))}),s!=null&&s.balances.length&&m.push({name:t("settings_jettons_list"),icon:e.jsx(se,{}),action:()=>n(c(a.jettons))}),i!=null&&i.length&&m.push({name:t("settings_collectibles_list"),icon:e.jsx(oe,{}),action:()=>n(c(a.nft))}),m.push({name:t("settings_security"),icon:e.jsx(ae,{}),action:()=>n(c(a.security))}),Z(o)&&m.push({name:t("settings_connected_apps"),icon:e.jsx(ie,{}),action:()=>n(c(g.connectedApps))}),(o.type==="mnemonic"||o.type==="mam")&&!x.disableWhole&&m.push({name:t("battery_title"),icon:e.jsx(ce,{}),action:()=>n(c(g.battery))}),l&&m.push({name:t("chains_title"),icon:e.jsx(re,{}),action:()=>n(c(g.chains))}),m.push({name:t("Delete_wallet_data"),icon:e.jsx(Ke,{}),action:()=>f(!0)}),m},[t,n,v,o,s,i,p,x,l]);return e.jsxs(e.Fragment,{children:[e.jsx(S,{items:P}),e.jsx(S,{items:le}),e.jsx(z,{account:y?o:void 0,handleClose:()=>f(!1)})]})},Dt=()=>V().length>1?e.jsx(kt,{}):e.jsx(wt,{}),Ct=()=>{const{t}=_(),n=V(),[s,i]=j.useState(!1),r=j.useMemo(()=>[{name:n.length>1?t("Delete_all_accounts_and_logout"):t("settings_delete_account"),icon:e.jsx(et,{}),action:()=>i(!0)}],[t,i]);return e.jsxs(e.Fragment,{children:[e.jsx(S,{items:r}),e.jsx(ke,{open:s,handleClose:()=>i(!1)})]})},Tt=h.div`
    user-select: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 1rem 0 1.563rem;
`,Wt=h(K)`
    margin-top: 0.125rem;
    color: ${t=>t.theme.textSecondary};
    user-select: none;
`,Lt=h.span`
    margin-bottom: 0.25rem;

    color: ${t=>t.theme.accentBlue};
`,Rt=()=>{const{t}=_(),n=b(),{version:s}=A(),i=A(),r=j.useRef({click:0,timer:void 0}),o=()=>{clearTimeout(r.current.timer),r.current.click++,r.current.timer=setTimeout(()=>{r.current.click=0},300),r.current.click===6&&n(c(a.dev))};return e.jsxs(Tt,{children:[e.jsx(Lt,{onClick:o,children:e.jsx(De,{width:"33",height:"33"})}),e.jsx(Ce,{children:"Tonkeeper Web"}),e.jsxs(Wt,{onClick:()=>i.copyToClipboard(s,t("App_version_copied")),children:[t("settings_version")," ",s]})]})},Bt=Te.memo(()=>{const t=b(),n=A(),s=We(),{t:i}=_(),r=j.useMemo(()=>{const o=[];return n.storeUrl&&o.push({name:i("settings_rate"),icon:e.jsx(tt,{}),action:()=>n.storeUrl&&n.openPage(n.storeUrl)}),o.concat([{name:i("settings_support"),icon:e.jsx(N,{}),action:()=>s.directSupportUrl&&n.openPage(s.directSupportUrl)},{name:i("settings_pro_ios"),icon:e.jsx(nt,{}),action:()=>s.pro_mobile_app_appstore_link&&n.openPage(s.pro_mobile_app_appstore_link)},{name:i("settings_news"),icon:e.jsx(N,{}),action:()=>s.tonkeeperNewsUrl&&n.openPage(s.tonkeeperNewsUrl)},{name:i("settings_contact_support"),icon:e.jsx(st,{}),action:()=>s.supportLink&&n.openPage(s.supportLink)},{name:i("settings_legal_documents"),icon:e.jsx(ot,{}),action:()=>t(c(a.legal))}])},[i,t,n.openPage]);return e.jsx(S,{items:r})}),Ft=()=>{const t=A(),{t:n,i18n:s}=_(),i=b(),{fiat:r}=B(),o=j.useMemo(()=>{const u=[];return t.notifications&&u.push({name:n("settings_notifications"),icon:e.jsx(Le,{}),action:()=>i(c(a.notification))}),u.push({name:n("settings_primary_currency"),icon:r,action:()=>i(c(a.fiat))}),s.enable&&u.push({name:n("Localization"),icon:e.jsx(Re,{}),action:()=>i(c(a.localization))}),u},[n,s.enable,i,r]);return e.jsx(S,{items:o})},Pt=()=>e.jsxs(e.Fragment,{children:[e.jsx(Dt,{}),e.jsx(Ft,{}),e.jsx(Bt,{}),e.jsx(Ct,{}),e.jsx(Rt,{})]}),Et=h(D)`
    display: flex;
    align-items: center;
    gap: 6px;
`,Nt=h(at)`
    flex-shrink: 0;
`,Mt=h(K)`
    color: ${t=>t.theme.textSecondary};
`,Ut=()=>{const t=F(),{t:n}=_(),s=Be(),{mutate:i}=Fe();return t?e.jsxs(ht,{fallbackRender:gt("Failed to display chains"),children:[e.jsx(T,{title:n("chains_title")}),e.jsx(w,{children:e.jsx(R,{children:e.jsx(k,{hover:!1,onClick:()=>i(),children:e.jsxs(I,{children:[e.jsxs("div",{children:[e.jsxs(Et,{children:["USD₮",e.jsx(Ee,{children:"TRC20"})]}),e.jsx(Mt,{children:n("settings_enable_tron_description")})]}),e.jsx(Nt,{checked:s})]})})})})]}):e.jsx(Pe,{to:$.home})},qt=()=>{const{path:t}=Ne();return e.jsxs(Me,{children:[e.jsx(d,{path:t+a.localization,component:it}),e.jsx(d,{path:t+a.legal,component:ct}),e.jsx(d,{path:t+a.dev,component:rt}),e.jsx(d,{path:t+a.fiat,component:lt}),e.jsx(d,{path:t+a.account,component:vt}),e.jsx(d,{path:t+a.notification,component:dt}),e.jsx(d,{path:t+`${a.recovery}/:accountId`,component:Ue}),e.jsx(d,{path:t+a.recovery,component:$e,exact:!0}),e.jsx(d,{path:t+a.version,component:ze}),e.jsx(d,{path:t+a.ledgerIndexes,component:Oe}),e.jsx(d,{path:t+a.jettons,component:pt}),e.jsx(d,{path:t+a.nft,component:At}),e.jsx(d,{path:t+a.security,component:mt}),e.jsx(d,{path:t+a.pro,component:Ve}),e.jsx(d,{path:t+g.connectedApps,component:It}),e.jsx(d,{path:t+g.derivations,component:He}),e.jsx(d,{path:t+g.battery,component:ut}),e.jsx(d,{path:t+g.twoFa,component:xt}),e.jsx(d,{path:t+g.chains,component:Ut}),e.jsx(d,{path:"*",render:()=>e.jsxs(e.Fragment,{children:[e.jsx(Je,{}),e.jsx(w,{children:e.jsx(Pt,{})})]})})]})};export{qt as default};
