import{b as x,a as g,jx as b,r as n,bv as S,jy as C,j as o,fF as h,aS as j,u as k,N as E}from"./index-pFCF53l2.js";import{u as v}from"./navigate-B9cT6U16.js";import{H as B,B as _,A as N}from"./AccountView-Bo-IhVAj.js";import"./index-B0JA3rv4.js";import"./TransitionGroup-Ba4hsFgp.js";const w=({sdk:e,boc:t,onClose:l,onSubmit:s,wallet:r})=>{const{t:a}=x(),{extension:p}=g();v(e,l);const i=b(null,s),d=n.useMemo(()=>{if(!S(r))throw new Error("Unexpected wallet");return C(r.publicKey,r.version,t)},[r,t]);return o.jsxs(h,{onSubmit:u=>{u.preventDefault(),u.stopPropagation(),i()},children:[o.jsx(B,{title:a("import_signer"),description:a("signer_scan_tx_description")}),o.jsx(_,{extension:p,margin:!0,children:o.jsx(N,{message:d})}),o.jsx(j,{primary:!0,size:"large",fullWidth:!0,type:"submit",children:a("signer_scan_result")})]})},H=()=>{const e=k(),[t,l]=n.useState(void 0),[s,r]=n.useState(void 0),[a,p]=n.useState(void 0),i=n.useCallback(()=>{l(void 0),r(void 0)},[]),d=n.useCallback(c=>{console.log(c),e.uiEvents.emit("response",{method:"response",id:s,params:c}),i()},[e,s,i]),u=n.useCallback(()=>{s&&e.uiEvents.emit("response",{method:"response",id:s,params:new Error("Cancel auth request")}),i()},[s,e,i]);n.useEffect(()=>{const c=m=>{l(m.params.boc),r(m.id),p(m.params.wallet)};return e.uiEvents.on("signer",c),()=>{e.uiEvents.off("signer",c)}},[e]);const f=n.useCallback(()=>{if(!(!t||!s||!a))return o.jsx(w,{sdk:e,boc:t,onClose:u,onSubmit:d,wallet:a})},[e,t,s,u,d,a]);return o.jsx(E,{isOpen:t!=null&&s!=null,handleClose:u,children:f})};export{w as SignerContent,H as default};
