import{gX as I,gY as O,ba as H,co as b,cP as E,r,j as e,gZ as u,dP as x,dQ as j,g_ as S,p as m,bb as k,a as B,c4 as M,c5 as _,cN as T,fn as U,g$ as h,cj as A,h0 as y,gV as f,h1 as p,b as v,h2 as F,bG as C,c2 as J,u as W,c7 as D,h3 as N,h4 as L,h5 as V,bY as w,s as Y,c6 as z,R as G,c0 as K,e as Q,cb as X}from"./index-pFCF53l2.js";import{M as Z}from"./MobileActivityList-DFWGLljt.js";import{S as $,R as q,a as ee,H as P}from"./TonActions-YW9sg-nG.js";import{u as se}from"./ActivityNotification-CQ1fiqir.js";import{u as te}from"./useSwapAssets--ZQPa-Xu.js";import ae from"./EmptyActivity-d_L-2Yve.js";import{H as ne}from"./HideForState-DGbvkaW_.js";import{u as oe}from"./useSendTransferNotification-BG5S2eYN.js";import"./useSwapMobileNotification-BXB33XwE.js";const g=({assetAddress:s,innerRef:t})=>{const{standalone:a}=B(),{refetch:o,isFetched:n,fetchNextPage:i,hasNextPage:c,isFetchingNextPage:l,data:d}=M(s);_(o,5e3,t);const R=l;return se(c,R,i,a,t),!n||!d?e.jsx(T,{}):d.length===0?e.jsx(r.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(ae,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{items:d}),R&&e.jsx(U,{size:3})]})},ie=({info:s,balance:t})=>{const[a,o]=r.useMemo(()=>[h(t.balance,s.metadata.decimals),b.Address.parse(t.jetton.address).toString()],[s,t]),{data:n}=A(o),i=y(a,s.metadata.decimals),{fiatAmount:c}=f(n,a),{description:l,image:d}=s.metadata;return e.jsx(p,{amount:i,symbol:s.metadata.symbol,price:c,description:l,image:d})},re=({jettonAddress:s})=>{const{data:t}=I(s),{data:a}=O(s),o=H(),{data:n}=te(),i=b.Address.parse(s).toRawString(),c=o||n==null?void 0:n.find(d=>E(d.address)===i),l=r.useRef(null);return!t||!a||!n?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:t.metadata.name}),e.jsxs(j,{ref:l,children:[e.jsx(ie,{balance:a,info:t}),e.jsxs(S,{children:[!o&&e.jsx($,{asset:t.metadata.address,chain:m.TON}),e.jsx(q,{jetton:t.metadata.address}),e.jsx(ne,{feature:k.swap,children:c&&e.jsx(ee,{fromAsset:c})})]}),e.jsx(g,{assetAddress:a.jetton.address,innerRef:l})]})]})},ce=({info:{balance:s}})=>{const{t}=v(),a=r.useMemo(()=>h(s),[s]),o=y(a),{data:n}=A(C.TON),{fiatAmount:i}=f(n,a);return e.jsx(p,{amount:o,symbol:"TON",price:i,description:t("Ton_page_description"),image:"https://wallet.tonkeeper.com/img/toncoin.svg"})},de=()=>{const{t:s}=v(),t=r.useRef(null),{data:a}=F();return a?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s("Toncoin")}),e.jsxs(j,{ref:t,children:[e.jsx(ce,{info:a}),e.jsx(P,{chain:m.TON}),e.jsx(g,{innerRef:t,assetAddress:C.TON})]})]}):e.jsx(u,{activity:4})},le=({assetAmount:s})=>{const{data:t}=z(),{fiatAmount:a}=f(t,s.relativeAmount);return e.jsx(p,{amount:s.stringRelativeAmount,symbol:s.asset.symbol,price:a,image:s.asset.image,imageNoCorners:!0})},me=Y.div`
    display: flex;
    align-items: center;
    gap: 6px;
`,ue=()=>{var n;const s=(n=J().data)==null?void 0:n.usdt,t=r.useRef(null),a=W(),{onOpen:o}=oe();return s===void 0?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:e.jsxs(me,{children:[s.asset.name,e.jsx(D,{children:"TRC20"})]})}),e.jsxs(j,{ref:t,children:[e.jsx(le,{assetAmount:s}),e.jsxs(S,{children:[e.jsx(N,{icon:e.jsx(L,{}),title:"wallet_send",action:()=>o({chain:m.TRON})}),e.jsx(N,{icon:e.jsx(V,{}),title:"wallet_receive",action:()=>a.uiEvents.emit("receive",{method:"receive",params:{chain:m.TRON,jetton:s.asset.id}})})]}),e.jsx(g,{assetAddress:w.address,innerRef:t})]})]})},xe=({extra:s})=>{const t=r.useMemo(()=>h(s.amount,s.preview.decimals),[s]),a=y(t),{data:o}=A(s.preview.symbol),{fiatAmount:n}=f(o,t);return e.jsx(p,{amount:a,symbol:s.preview.symbol,price:n,image:s.preview.image})},je=({name:s})=>{var i;const{t}=v(),a=r.useRef(null),{data:o}=F(),n=(i=o==null?void 0:o.extraBalance)==null?void 0:i.find(c=>c.preview.symbol===s);return n?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:s}),e.jsxs(j,{ref:a,children:[e.jsx(xe,{extra:n}),e.jsx(P,{chain:m.TON}),e.jsx(g,{innerRef:a,assetAddress:n.preview.symbol})]})]}):e.jsx(u,{activity:4})},Ne=()=>{const s=G(),{name:t}=K();return r.useEffect(()=>{t||s(Q.home)},[t]),t?t===w.id?e.jsx(ue,{}):t==="ton"?e.jsx(de,{}):X(decodeURIComponent(t))?e.jsx(re,{jettonAddress:decodeURIComponent(t)}):e.jsx(je,{name:t}):e.jsx(e.Fragment,{})};export{Ne as default};
