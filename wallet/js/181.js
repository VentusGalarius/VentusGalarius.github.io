"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[181],{181:(s,a,t)=>{t.r(a),t.d(a,{default:()=>c});var e=t(540),n=t(527),i=t(848);const c=function(s){var a=s.tonBalance,t=s.initData,c=s.user;function l(s){Telegram.WebApp.showPopup({title:"WalletStars",message:s,buttons:[{id:"ok",type:"close",text:"Ок"}]})}var r=0,o=!0,d=.0153,_=1.75;return(0,e.useEffect)((function(){var s,e,n;s=document.getElementById("product"),e=document.getElementById("not_found_avatar"),n=document.getElementById("duck_accepts"),lottie.loadAnimation({container:n,renderer:"svg",loop:!0,autoplay:!0,path:"/assets/stickers/duck_think.json"}),lottie.loadAnimation({container:e,renderer:"svg",loop:!0,autoplay:!0,path:"/assets/stickers/duck_sweet.json"}),lottie.loadAnimation({container:s,renderer:"svg",loop:!0,autoplay:!0,path:"/assets/stickers/star_buy_test.json?v=2"}),fetch("/api/get_ton_price",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(s){return s.json()})).then((function(s){if(s.price){r=s.price,$(".pay_stars").css("opacity","1"),o=!1;var a=$(".inp_count_stars").val();if(a){var t=(d*a/r).toFixed(3);$(".pay_stars").html("Купить звёзды (≈".concat(t," TON)"))}else $(".pay_stars").html("Купить звёзды")}else l("❌ Ошибка получения цены TON, сообщите тех.поддержке")})).catch((function(s){console.error("Fetch error:",s),l("❌ Ошибка получения цены TON, сообщите тех.поддержке")}));var i="ton";return $(".select_tok_ton").on("click",(function(){i=$(this).attr("data-val"),$(".select_tok_ton").removeClass("active"),$(this).addClass("active");var s=$(".inp_count_stars").val();if("ton"==i){if(0!=r){var a=(d*s/r).toFixed(3);$(".pay_stars").html("Купить звёзды (≈".concat(a," TON)")),$(".auto_variants_buy_max").show()}}else if(0!=r){var t=(_*s).toFixed(2);$(".pay_stars").html("Купить звёзды (".concat(t,"₽)")),$(".auto_variants_buy_max").hide()}})),$(".auto_variants_buy").on("click",(function(){var s=$(this).attr("data-stars"),t=0;if(t="max"==s?Math.floor(a*r/d):s,$(".inp_count_stars").val(t),"ton"==i){if(0!=r){var e=(d*t/r).toFixed(3);$(".pay_stars").html("Купить звёзды (≈".concat(e," TON)"))}}else if(0!=r){var n=(_*t).toFixed(2);$(".pay_stars").html("Купить звёзды (".concat(n,"₽)"))}})),$(".pay_stars").on("click",(function(){$(".modal_accept_transaction").fadeIn().addClass("show")})),$(".close_modal_accept_transaction").on("click",(function(){$(".modal_accept_transaction").removeClass("show").fadeOut()})),$(".modal_accept_transaction").on("click",(function(s){s.target===this&&$(".modal_accept_transaction").removeClass("show").fadeOut()})),$(".btn_accept_transaction").on("click",(function(){if(!o){var s=$(this);o=!0,s.css("opacity","0.5"),"ton"==i?$.ajax({url:"/api/buy_stars",type:"POST",dataType:"json",data:{initData:t,username:$(".searh_user_inp").val(),stars:$(".inp_count_stars").val()},success:function(a){s.css("opacity","1"),o=!1,a.result&&($(".searh_user_inp").val(""),$(".inp_count_stars").val(""),$(".block_search_username").removeClass("found"),$(".block_search_username").css("opacity","0"),$(".pay_stars").html("Купить звёзды")),$(".modal_accept_transaction").removeClass("show").fadeOut(),l(a.message)}}):$.ajax({type:"POST",url:"/api/create_payment",data:{initData:t,stars:$(".inp_count_stars").val(),username:$(".searh_user_inp").val(),type:"miniApp"},success:function(a){o=!1,s.css("opacity","1"),a.result?($(".searh_user_inp").val(""),$(".inp_count_stars").val(""),$(".block_search_username").removeClass("found"),$(".block_search_username").css("opacity","0"),$(".pay_stars").html("Купить звёзды"),window.Telegram.WebApp.openLink(a.message)):l(a.message)},dataType:"json"})}})),$(".inp_count_stars").on("input",(function(){var s=$(this).val();if((s=(s=(s=s.replace(/[^0-9.,]/g,"")).replace(/,/g,".")).replace(/(\..*)\./g,"$1"))>1e6&&(s=1e6),"ton"==i){if(0!=r){var a=(d*s/r).toFixed(2);$(".pay_stars").html("Купить звёзды (≈".concat(a," TON)"))}}else if(0!=r){var t=(_*s).toFixed(2);$(".pay_stars").html("Купить звёзды (".concat(t,"₽)"))}$(this).val(s)})),$(".btn_inp_me").on("click",(function(){$(".searh_user_inp").val(c),$(".searh_user_inp").trigger("input")})),$(".searh_user_inp").on("input",(function(){var s=$(this);s.val()?($(".block_search_username").removeClass("found"),$(".name_search").html("Поиск..."),$(".block_search_username").css("opacity","1")):($(".block_search_username").removeClass("found"),$(".block_search_username").css("opacity","0")),clearTimeout(s.data("timer")),s.data("timer",setTimeout((function(){$.ajax({url:"/api/get_tg_user_stars",type:"POST",dataType:"json",data:{initData:t,username:s.val()},success:function(s){if(s.result){var a=s.name;a.length>30&&(a=a.substring(0,30)+".."),$(".avatar_search").attr("src",s.image),$(".name_search").html(a),$(".block_search_username").addClass("found")}else $(".block_search_username").removeClass("found"),$(".name_search").html("Пользователь не найден")}})}),200))})),function(){console.log("Очистка эффектов")}}),[]),(0,i.jsx)("div",{children:(0,i.jsx)("div",{class:"content",children:(0,i.jsxs)("div",{style:{"margin-bottom":"100px"},class:"main_content",children:[(0,i.jsx)("div",{class:"modal_accept_transaction",children:(0,i.jsxs)("div",{class:"content_modal_accept_transaction",children:[(0,i.jsx)("div",{class:"close_modal_accept_transaction",children:"X"}),(0,i.jsx)("div",{id:"duck_accepts"}),(0,i.jsx)("div",{class:"btn_accept_transaction",children:"Подтвердить"})]})}),(0,i.jsx)("div",{class:"block_product_market",children:(0,i.jsx)("div",{id:"product"})}),(0,i.jsxs)("div",{class:"inputs_block",children:[(0,i.jsxs)("div",{style:{justifyContent:"flex-start",alignItems:"center"},class:"blocks_search_username",children:[(0,i.jsxs)("div",{class:"block_search_username",children:[(0,i.jsx)("div",{id:"not_found_avatar"}),(0,i.jsx)("img",{src:"https://i.ibb.co/C2TCjr6/image.png",alt:"avatar",class:"avatar_search"}),(0,i.jsx)("div",{class:"name_search",children:"Пользователь не найден"})]}),(0,i.jsx)("input",{autocomplete:"off",type:"text",placeholder:"Введите @username получателя",class:"input_def searh_user_inp"}),(0,i.jsx)("div",{class:"btn_inp_me",children:"Себе"})]}),(0,i.jsxs)("div",{class:"container_buy_inp",children:[(0,i.jsx)("input",{autocomplete:"off",type:"text",placeholder:"50⭐️ MIN",class:"input_def inp_count_stars"}),(0,i.jsxs)("div",{class:"choose_token",children:[(0,i.jsxs)("div",{"data-val":"ton",class:"select_tok_ton active",children:[(0,i.jsxs)("svg",{class:"",width:"26",height:"26",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{"clip-path":"url(#clip0_27_12191)",children:[(0,i.jsx)("rect",{width:"40",height:"40",rx:"20",fill:"#35AFF1"}),(0,i.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.3438 10.9734C27.8586 10.9734 28.3734 11.0497 28.9126 11.2998C29.5589 11.6018 29.8999 12.076 30.1403 12.4267C30.4546 12.9416 30.6204 13.5334 30.6194 14.1366C30.6216 14.7306 30.4718 15.3153 30.1841 15.8351L20.9762 31.6495C20.7737 31.999 20.3998 32.2136 19.9959 32.2123C19.5919 32.211 19.2195 31.9939 19.0193 31.643L9.9819 15.8611L9.97378 15.8481C9.76753 15.5071 9.44761 14.981 9.39077 14.3006C9.28616 13.0194 9.9878 11.8078 11.1512 11.2608C11.7618 10.9766 12.3805 10.9734 12.7703 10.9734H27.3438ZM18.8699 13.2338H12.7703C12.3691 13.2338 12.2149 13.2581 12.1077 13.3085C11.7976 13.452 11.6116 13.7753 11.6432 14.1155C11.6513 14.2129 11.6903 14.3217 11.9209 14.7017L11.9355 14.7261L18.8699 26.8349V13.2338ZM21.1305 26.895L28.2272 14.7066C28.3167 14.53 28.3624 14.3345 28.3604 14.1366C28.3604 13.9628 28.3247 13.8118 28.2435 13.6559C28.1902 13.5744 28.1305 13.4973 28.0648 13.4254C28.0347 13.3925 27.9983 13.366 27.9577 13.3474C27.7647 13.2622 27.5545 13.2233 27.3438 13.2338H21.1305V26.895Z",fill:"white"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_27_12191",children:(0,i.jsx)("rect",{width:"40",height:"40",fill:"white"})})})]}),"TON"]}),(0,i.jsxs)("div",{"data-val":"rub",class:"select_tok_ton",children:[(0,i.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M13.5 11.25H10.75V8.2C10.75 8.10303 10.7501 8.04531 10.7513 8.0018C10.752 7.97419 10.7531 7.96219 10.7533 7.9593C10.7708 7.85362 10.8536 7.77077 10.9593 7.75334C10.9622 7.75305 10.9742 7.75201 11.0018 7.75126C11.0453 7.75007 11.103 7.75 11.2 7.75H13.5C14.4665 7.75 15.25 8.5335 15.25 9.5C15.25 10.4665 14.4665 11.25 13.5 11.25Z",fill:"#009393"}),(0,i.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM8.25 14C8.25 13.5858 8.58579 13.25 9 13.25H9.25V12.75H9C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25H9.25L9.24997 8.16151C9.24979 8.01598 9.24961 7.86471 9.27155 7.72624C9.39015 6.97743 9.97743 6.39015 10.7262 6.27155C10.8647 6.24961 11.016 6.24979 11.1615 6.24997L13.5 6.25C15.2949 6.25 16.75 7.70507 16.75 9.5C16.75 11.2949 15.2949 12.75 13.5 12.75H10.75V13.25H12C12.4142 13.25 12.75 13.5858 12.75 14C12.75 14.4142 12.4142 14.75 12 14.75H10.75V17C10.75 17.4142 10.4142 17.75 10 17.75C9.58579 17.75 9.25 17.4142 9.25 17V14.75H9C8.58579 14.75 8.25 14.4142 8.25 14Z",fill:"#009393"})]}),"RUB"]})]})]}),(0,i.jsxs)("div",{class:"auto_variants_buy_cont",children:[(0,i.jsxs)("div",{"data-stars":"50",class:"auto_variants_buy",children:["50",(0,i.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 15",fill:"#feb21c",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z",fill:"#feb21c"})})]}),(0,i.jsxs)("div",{"data-stars":"100",class:"auto_variants_buy",children:["100",(0,i.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 15",fill:"#feb21c",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z",fill:"#feb21c"})})]}),(0,i.jsxs)("div",{"data-stars":"500",class:"auto_variants_buy",children:["500",(0,i.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 15",fill:"#feb21c",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z",fill:"#feb21c"})})]}),(0,i.jsxs)("div",{"data-stars":"1000",class:"auto_variants_buy",children:["1000",(0,i.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 15",fill:"#feb21c",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z",fill:"#feb21c"})})]}),(0,i.jsx)("div",{"data-stars":"max",class:"auto_variants_buy auto_variants_buy_max",children:"MAX"})]})]}),(0,i.jsxs)("div",{class:"description_product",children:["Покупая «Telegram Stars», вы соглашаетесь с ",(0,i.jsx)(n.N_,{to:"/rules",class:"rule_text_inspect",children:"правилами"})," сервиса."]}),(0,i.jsx)("div",{style:{opacity:"0.3"},class:"blue_btn_def pay_stars",children:"Ожидание курса TON.."})]})})})}}}]);