"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[168],{168:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(540),c=a(527),n=a(848);const o=function(e){var s=e.initData,a=e.user;function o(e){Telegram.WebApp.showPopup({title:"WalletStars",message:e,buttons:[{id:"ok",type:"close",text:"Ок"}]})}return(0,t.useEffect)((function(){var e=1,t=12,c=!1;return function(){var s=document.getElementById("product"),a=document.getElementById("not_found_avatar");lottie.loadAnimation({container:s,renderer:"svg",loop:!0,autoplay:!0,path:"/assets/stickers/premium_1_y.json"}),lottie.loadAnimation({container:a,renderer:"svg",loop:!0,autoplay:!0,path:"/assets/stickers/duck_sweet.json"});var t=document.getElementById("duck_accepts");lottie.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,path:"/assets/stickers/duck_think.json"}),fetch("/api/get_ton_price",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return console.log("Response Status:",e.status),console.log("Content-Type:",e.headers.get("Content-Type")),e.json()})).then((function(s){console.log("Data:",s),s.price?(e=s.price,$(".buy_tg_premium").html("Купить Premium (≈".concat((32/e).toFixed(2)," TON)"))):o("❌ Ошибка получения цены TON, сообщите тех.поддержке")})).catch((function(e){console.error("Fetch error:",e),o("❌ Ошибка получения цены TON, сообщите тех.поддержке")}))}(),$(".1year").on("click",(function(){t=12,$(".choose_duration").removeClass("active"),$(this).addClass("active"),$(".buy_tg_premium").html("Купить Premium (≈".concat((32/e).toFixed(2)," TON)"))})),$(".6month").on("click",(function(){t=6,$(".choose_duration").removeClass("active"),$(this).addClass("active"),$(".buy_tg_premium").html("Купить Premium (≈".concat((17.75/e).toFixed(2)," TON)"))})),$(".3month").on("click",(function(){t=3,$(".choose_duration").removeClass("active"),$(this).addClass("active"),$(".buy_tg_premium").html("Купить Premium (≈".concat((13.25/e).toFixed(2)," TON)"))})),$(".btn_inp_me").on("click",(function(){$(".searh_user_inp").val(a),$(".searh_user_inp").trigger("input")})),$(".buy_tg_premium").on("click",(function(){$(".modal_accept_transaction").fadeIn().addClass("show")})),$(".close_modal_accept_transaction").on("click",(function(){$(".modal_accept_transaction").removeClass("show").fadeOut()})),$(".modal_accept_transaction").on("click",(function(e){e.target===this&&$(".modal_accept_transaction").removeClass("show").fadeOut()})),$(".btn_accept_transaction").on("click",(function(){if(!c){var e=$(this);c=!0,e.css("opacity","0.5"),$.ajax({url:"/api/buy_premium",type:"POST",dataType:"json",data:{initData:s,username:$(".searh_user_inp").val(),months:t},success:function(s){e.css("opacity","1"),c=!1,s.result&&($(".searh_user_inp").val(""),$(".block_search_username").removeClass("found"),$(".block_search_username").css("opacity","0")),$(".modal_accept_transaction").removeClass("show").fadeOut(),o(s.message)}})}})),$(".searh_user_inp").on("input",(function(){var e=$(this);e.val()?($(".block_search_username").removeClass("found"),$(".name_search").html("Поиск..."),$(".block_search_username").css("opacity","1")):($(".block_search_username").removeClass("found"),$(".block_search_username").css("opacity","0")),clearTimeout(e.data("timer")),e.data("timer",setTimeout((function(){$.ajax({url:"/api/get_tg_user",type:"POST",dataType:"json",data:{initData:s,username:e.val()},success:function(e){if(e.result){var s=e.name;s.length>30&&(s=s.substring(0,30)+".."),$(".avatar_search").attr("src",e.image),$(".name_search").html(s),$(".block_search_username").addClass("found")}else $(".block_search_username").removeClass("found"),$(".name_search").html(e.message)}})}),200))})),function(){console.log("Очистка эффектов")}}),[]),(0,n.jsx)("div",{children:(0,n.jsx)("div",{class:"content",children:(0,n.jsxs)("div",{style:{"margin-bottom":"100px"},class:"main_content",children:[(0,n.jsx)("div",{class:"modal_accept_transaction",children:(0,n.jsxs)("div",{class:"content_modal_accept_transaction",children:[(0,n.jsx)("div",{class:"close_modal_accept_transaction",children:"X"}),(0,n.jsx)("div",{id:"duck_accepts"}),(0,n.jsx)("div",{class:"btn_accept_transaction",children:"Подтвердить"})]})}),(0,n.jsx)("div",{class:"block_product_market",children:(0,n.jsx)("div",{id:"product"})}),(0,n.jsxs)("div",{class:"inputs_block blocks_search_username",children:[(0,n.jsxs)("div",{class:"block_search_username",children:[(0,n.jsx)("div",{id:"not_found_avatar"}),(0,n.jsx)("img",{src:"https://i.ibb.co/C2TCjr6/image.png",alt:"avatar",class:"avatar_search"}),(0,n.jsx)("div",{class:"name_search",children:"Пользователь не найден"})]}),(0,n.jsx)("input",{autocomplete:"off",type:"text",placeholder:"Введите @username получателя",class:"input_def searh_user_inp"}),(0,n.jsx)("div",{class:"btn_inp_me",children:"Себе"})]}),(0,n.jsxs)("div",{class:"duration_premium",children:[(0,n.jsx)("div",{class:"choose_duration 1year active",children:"1 год"}),(0,n.jsx)("div",{class:"choose_duration 6month",children:"6 мес."}),(0,n.jsx)("div",{class:"choose_duration 3month",children:"3 мес."})]}),(0,n.jsxs)("div",{class:"description_product",children:["При нажатии кнопки, вы соглашаетесь с ",(0,n.jsx)(c.N_,{to:"/rules",class:"rule_text_inspect",children:"правилами"})," сервиса."]}),(0,n.jsx)("div",{class:"blue_btn_def buy_tg_premium",children:"Купить Premium (N TON)"})]})})})}}}]);